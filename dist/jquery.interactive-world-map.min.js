$(function(b,n,p,q){function g(a,b){this.element=a;this._options=b;this.init()}function e(b,d){return'<pattern id="'+b+'" width="'+a.svg.pattern.size.width+'" height="'+a.svg.pattern.size.heigth+'"     patternUnits="userSpaceOnUse"><circle x="'+a.svg.pattern.circle.x+'" y="'+a.svg.pattern.circle.y+'" cx="'+a.svg.pattern.circle.cx+'" cy="'+a.svg.pattern.circle.cy+'" r="'+a.svg.pattern.circle.r+'" style="stroke:none; fill:'+d+'"></circle></pattern>'}var a,d={},h={},k,l,m,f={colors:{general:"#cccccc",
    hover:"red",highlighted:"green"},popup:{margins:{top:100,left:60}},svg:{pattern:{circle:{x:1,y:1,cx:3,cy:3,r:2},size:{width:"5",heigth:"5"}}},classes:{popup:{containerWebsites:"container-websites",containerImage:"container-image",image:"main-image",modal:"main-modal",container:"container",websites:"websites",title:"title"}},ids:{dots:{highlighted:"dotsHighlighted",general:"dotsGeneral",hover:"dotsHover"}}};b.extend(g.prototype,{init:function(){a=b.extend(f,b(this.element).data(),this._options);d=
    b.isPlainObject(a.countries)?a.countries:jQuery.parseJSON(a.countries);this.createPatterns();this.prependModalContainer()},createPatterns:function(){k=e(a.ids.dots.highlighted,a.colors.highlighted);l=e(a.ids.dots.general,a.colors.general);m=e(a.ids.dots.hover,a.colors.hover)},prependModalContainer:function(){b(this.element).prepend('<div class="'+a.classes.popup.modal+'"><div class="'+a.classes.popup.container+'"><span class="closeBtn">X</span><div class="'+a.classes.popup.containerImage+'" ><div class="'+
    a.classes.popup.image+' flag flag-icon-background  " alt=""></div></div><div><div class="'+a.classes.popup.title+'"></div><div class="'+a.classes.popup.containerWebsites+'"></div></div></a></p></div></div>')}});b.fn.interactiveWorldMap=function(e){return this.each(function(){new g(this,e);b.each(d,function(a,b){h[a]="url(#dotsHighlighted)"});b(this).vectorMap({map:"world_mill_en",backgroundColor:"white",dotsGeneralId:a.ids.dots.general,dotsHighlightedId:a.ids.dots.highlighted,dotsHoverId:a.ids.dots.hover,
    heightGeneralDots:"5",widthGeneralDots:"5",regionStyle:{initial:{fill:"url(#"+a.ids.dots.general+")"},hover:{"fill-opacity":1}},series:{regions:[{values:h,attribute:"fill",hover:{"fill-opacity":.8,cursor:"pointer"}}]},onRegionOver:function(e,c){d[c]&&(data=[],data[c]="url(#"+a.ids.dots.hover+" )",b(this).parent().vectorMap("get","mapObject").series.regions[0].setValues(data))},onRegionOut:function(e,c){d[c]&&(data=[],data[c]="url(#"+a.ids.dots.highlighted+")",b(this).parent().vectorMap("get","mapObject").series.regions[0].setValues(data))},
    onRegionClick:function(a,c){d[c]&&(optionsPopup={code:c,margins:f.popup.margins,country:d[c],element:b(this),classes:f.classes.popup},new b.fn.interactiveWorldMapCountryPopup(optionsPopup))}});b("defs").html(l+k+m)})}});